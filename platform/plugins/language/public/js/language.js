(()=>{function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a(t)}function t(t,e){for(var n=0;n<e.length;n++){var l=e[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,(o=l.key,r=void 0,r=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var l=n.call(t,e||"default");if("object"!==a(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===a(r)?r:String(r)),l)}var o,r}var e=function(){function a(){!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}var e,n,l;return e=a,l=[{key:"formatState",value:function(a){return!a.id||a.element.value.toLowerCase().includes("...")?a.text:$('<div>\n                <span class="dropdown-item-indicator">\n                    <img src="'.concat($("#language_flag_path").val()).concat(a.element.value.toLowerCase(),'.svg" class="flag" style="height: 16px;" alt="').concat(a.text,'">\n                </span>\n                <span>').concat(a.text,"</span>\n            </div\n        "))}},{key:"createOrUpdateLanguage",value:function(a,t,e,n,l,o,r,i){var c=route("languages.store");i&&(c="".concat(route("languages.edit"),"?lang_code=").concat(n)),Botble.showButtonLoading($("#btn-language-submit"),!0),$httpClient.make().post(c,{lang_id:a.toString(),lang_name:t,lang_locale:e,lang_code:n,lang_flag:l,lang_order:o,lang_is_rtl:r}).then((function(t){var e=t.data;i?$(".table-language").find("tr[data-id="+a+"]").replaceWith(e.data):$(".table-language").append(e.data),Botble.showSuccess(e.message)})).finally((function(){$("#language_id").val("").trigger("change"),$("#lang_name").val(""),$("#lang_locale").val(""),$("#lang_code").val(""),$("input[name=lang_rtl][value=0]").prop("checked",!0),$("#flag_list").val("").trigger("change"),$("#btn-language-submit-edit").prop("id","btn-language-submit").text("Add new language"),Botble.hideButtonLoading($("#btn-language-submit"))}))}}],(n=[{key:"init",value:function(){var t=this;Botble.select($(".select-search-language"),{templateResult:a.formatState,templateSelection:a.formatState});var e=$(".table-language");$(document).on("change","#language_id",(function(a){var t=$(a.currentTarget).find("option:selected").data("language");void 0!==t&&t.length>0&&($("#lang_name").val(t[2]),$("#lang_locale").val(t[0]),$("#lang_code").val(t[1]),$('input[name=lang_rtl][value="'.concat("rtl"===t[3]?1:0,'"]')).prop("checked",!0),$("#flag_list").val(t[4]).trigger("change"),$("#btn-language-submit-edit").prop("id","btn-language-submit").text("Add new language"))})),$(document).on("click","#btn-language-submit",(function(t){t.preventDefault();var e=$("#lang_name").val(),n=$("#lang_locale").val(),l=$("#lang_code").val(),o=$("#flag_list").val(),r=$("#lang_order").val(),i=$("input[name=lang_rtl]:checked").val();a.createOrUpdateLanguage(0,e,n,l,o,r,i,0)})),$(document).on("click","#btn-language-submit-edit",(function(t){t.preventDefault();var e=$("#lang_id").val(),n=$("#lang_name").val(),l=$("#lang_locale").val(),o=$("#lang_code").val(),r=$("#flag_list").val(),i=$("#lang_order").val(),c=$("input[name=lang_rtl]:checked").val();a.createOrUpdateLanguage(e,n,l,o,r,i,c,1)})),e.on("click",".deleteDialog",(function(a){a.preventDefault(),$(".delete-crud-entry").data("section",$(a.currentTarget).data("section")),$(".modal-confirm-delete").modal("show")})),$(".delete-crud-entry").on("click",(function(a){a.preventDefault(),$(".modal-confirm-delete").modal("hide");var n=$(a.currentTarget).data("section");Botble.showButtonLoading($(t)),$httpClient.make().delete(n).then((function(a){var t=a.data;t.data&&(e.find("i[data-id=".concat(t.data,"]")).unwrap(),$(".tooltip").remove()),e.find('button[data-section="'.concat(n,'"]')).closest("tr").remove(),Botble.showSuccess(t.message)})).finally((function(){Botble.hideButtonLoading($(t))}))})),e.on("click",".set-language-default",(function(a){a.preventDefault();var t=$(a.currentTarget);$httpClient.make().get(t.data("section")).then((function(a){var n=a.data,l=e.find("td > span.icon-tabler-wrapper");l.closest("td span.icon-tabler-wrapper").removeClass("text-yellow"),l.replaceWith('<a href="javascript:void(0);" data-section="'.concat(route("languages.set.default"),"?lang_id=").concat(l.data("id"),'" class="set-language-default text-decoration-none" data-bs-toggle="tooltip" data-bs-original-title="Choose ').concat(l.data("name"),' as default language">').concat(l.closest("td").html(),"</a>")),t.find("span.icon-tabler-wrapper").unwrap().addClass("text-yellow"),$(".tooltip").remove(),Botble.showSuccess(n.message)}))})),e.on("click",".edit-language-button",(function(a){a.preventDefault();var t=$(a.currentTarget);$httpClient.make().get("".concat(route("languages.get"),"?lang_id=").concat(t.data("id"))).then((function(a){var t=a.data.data;$("#lang_id").val(t.lang_id),$("#lang_name").val(t.lang_name),$("#lang_locale").val(t.lang_locale),$("#lang_code").val(t.lang_code),$("#flag_list").val(t.lang_flag).trigger("change"),$("input[name=lang_rtl][value=".concat(t.lang_is_rtl,"]")).prop("checked",!0),$("#lang_order").val(t.lang_order),$("#btn-language-submit").prop("id","btn-language-submit-edit").text("Update")}))})),$(document).on("submit","form.language-settings-form",(function(a){a.preventDefault();var t=$(a.currentTarget),e=t.find("button[type=submit]");Botble.showButtonLoading(e),$httpClient.make().postForm(t.prop("action"),new FormData(t[0])).then((function(a){var e=a.data;Botble.showSuccess(e.message),t.removeClass("dirty")})).finally((function(){Botble.hideButtonLoading(e)}))}))}}])&&t(e.prototype,n),l&&t(e,l),Object.defineProperty(e,"prototype",{writable:!1}),a}();$((function(){(new e).init()}))})();