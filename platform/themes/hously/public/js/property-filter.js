(()=>{"use strict";var e={205:(e,t,r)=>{r.d(t,{Z:()=>c});window.showAlert=function(e,t){if(e&&""!==t){var r=Math.floor(1e3*Math.random()),a='<div class="alert '.concat(e,' alert-dismissible" id="').concat(r,'">\n                            <span class="close mdi mdi-close-box" data-dismiss="alert" aria-label="close"></span>\n                            <i class="')+("alert-success"===e?"mdi mdi-check":"mdi mdi-close")+' message-icon"></i>\n                            '.concat(t,"\n                        </div>");$("#alert-container").append(a).ready((function(){window.setTimeout((function(){$("#alert-container #".concat(r)).remove()}),6e3)}))}};var a=function(e,t,r){var a=new Date,i=window.siteUrl;i.includes(window.location.protocol)||(i=window.location.protocol+i);var o=new URL(i);a.setTime(a.getTime()+24*r*60*60*1e3);var n="expires="+a.toUTCString();document.cookie=e+"="+t+"; "+n+"; path=/; domain="+o.hostname},i=function(e){for(var t=e+"=",r=document.cookie.split(";"),a=0;a<r.length;a++){for(var i=r[a];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},o=function(e){var t=window.siteUrl;t.includes(window.location.protocol)||(t=window.location.protocol+t);var r=new URL(t);document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain="+r.hostname};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function s(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(i=a.key,o=void 0,o=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===n(o)?o:String(o)),a)}var i,o}var l=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refresh(),$(document).on("click",".add-to-wishlist",(function(e){e.preventDefault(),t.addOrRemove($(e.currentTarget))}))}var t,r,n;return t=e,r=[{key:"addOrRemove",value:function(e){var t="real_estate_wishlist",r=e.data("id"),n=e.data("type"),s=decodeURIComponent(i(t));if(s=s?JSON.parse(s):{projects:[],properties:[]},null!=r&&0!==r&&void 0!==r){var l=s.properties;"project"===n&&(l=s.projects);var c=l.map((function(e){return e})).indexOf(r);-1===c?("project"===n?s.projects.push(r):s.properties.push(r),o(t),a(t,JSON.stringify(s),60),e.find("i").removeClass("mdi mdi-heart-outline").addClass("mdi mdi-heart")):("project"===n?s.projects.splice(c,1):s.properties.splice(c,1),o(t),a(t,JSON.stringify(s),60),e.find("i").removeClass("mdi mdi-heart").addClass("mdi mdi-heart-outline"))}var d=JSON.parse(i(t)),p=d.properties.length+d.projects.length;$(".wishlist-count").text(p),this.refresh()}},{key:"refresh",value:function(){var e=decodeURIComponent(i("real_estate_wishlist"));if(null!=e&&e){var t=JSON.parse(e);t.properties.length&&$.each($(document).find('.add-to-wishlist[data-box-type="property"]'),(function(e,r){var a=$(r).data("id");-1!==t.properties.indexOf(a)&&$(r).find("i").removeClass("mdi mdi-heart-outline").addClass("mdi mdi-heart")})),t.projects.length&&$.each($(document).find('.add-to-wishlist[data-box-type="project"]'),(function(e,r){var a=$(r).data("id");-1!==t.projects.indexOf(a)&&$(r).find("i").removeClass("mdi mdi-heart-outline").addClass("mdi mdi-heart")}))}}}],r&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const c=l;new l}},t={};function r(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=r(205);function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,o(a.key),a)}}function i(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){var r=function(e,r){if("object"!==t(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"===t(r)?r:String(r)}new(function(){function t(){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"$propertyElement",$(".property-search")),i(this,"$filterDrawer",$("#filter-drawer")),i(this,"wishlist",new e.Z),i(this,"searchParams",new URLSearchParams(window.location.search)),i(this,"form",this.$propertyElement.find("form")),i(this,"action",this.form.prop("action")),i(this,"ajaxUrl",this.form.data("ajax-url")),i(this,"url",this.action),i(this,"ajaxUrlWithQueryString",this.ajaxUrl),i(this,"filterAjax",null),this.setAjaxUrls(),$(document).on("click",".sidebar-backdrop",(function(e){$(e.currentTarget).is("#filter-drawer > div")||r.closeFilterDrawer()})),this.form.submit((function(e){e.preventDefault(),$(e.currentTarget).serializeArray().forEach((function(e){e.value&&r.searchParams.set(e.name,e.value)})),r.closeFilterDrawer(),r.refresh()})),this.$filterDrawer.on("click","#close-filters",(function(){r.closeFilterDrawer()})),$(document).on("change","#keyword",(function(e){r.searchParams.set("keyword",e.target.value)})).on("change","#location",(function(e){r.searchParams.set("location",e.target.value)})),this.$propertyElement.on("change","#sort-by",(function(){var e=r.$propertyElement.find("#sort-by").val();r.searchParams.set("sort_by",e),r.refresh()})).on("change","#per-page",(function(){var e=r.$propertyElement.find("#per-page").val();r.searchParams.set("per_page",e),r.refresh()})).on("click","#reset-filter",(function(e){e.preventDefault(),r.closeFilterDrawer(),r.searchParams=new URLSearchParams,r.$propertyElement.not(':has(> input[name="type"])').find("input").val(""),r.$propertyElement.find("select").prop("selectedIndex",0),r.refresh()})).on("click","#open-filter",(function(){r.openFilterDrawer()})).on("click",".toggle-layout",(function(e){r.searchParams.set("layout",$(e.currentTarget).data("type")),$(".toggle-layout").removeClass("bg-secondary").addClass("bg-slate-500").prop("disabled",!1),$(e.currentTarget).addClass("bg-secondary").removeClass("bg-slate-500").prop("disabled",!0),r.refresh()})),$(document).on("click","#pagination a",(function(e){e.preventDefault();var t=new URL(e.target.href);r.searchParams.set("page",t.searchParams.get("page")),r.refresh()}))}var r,o,n;return r=t,(o=[{key:"setAjaxUrls",value:function(){""!==this.searchParams.toString()&&(this.url=""===this.searchParams.toString()?this.action:"".concat(this.action,"?").concat(this.searchParams.toString()),this.ajaxUrlWithQueryString=this.ajaxUrl+(-1!==this.ajaxUrl.indexOf("?")?"&":"?")+this.searchParams.toString())}},{key:"refresh",value:function(){var e=this,t=$(document).find("#properties-list"),r=this.searchParams.get("layout")||t.data("layout"),a=$("#property-".concat(r,"-skeleton")).html();"grid"===r?(t.children().removeClass("lg:grid-cols-2").addClass("md:grid-cols-2 lg:grid-cols-3"),this.disableMap()):"list"===r?(t.children().removeClass("md:grid-cols-2 lg:grid-cols-3").addClass("lg:grid-cols-2"),this.disableMap()):"map"===r&&(this.activeMap(),this.initMaps()),a&&t.find(".property-item").each((function(e,t){$(t).html(a)}));var i=null;clearTimeout(i),$("html, body").animate({scrollTop:$("#properties-list").offset().top-200},0),t.addClass("animate-pulse"),this.updateBrowserUrl(),i=setTimeout((function(){e.filterAjax&&e.filterAjax.abort(),e.filterAjax=$.post(e.ajaxUrlWithQueryString,(function(a){t.html(a.data),e.wishlist.refresh(),"map"===r&&(e.activeMap(),e.initMaps()),t.removeClass("animate-pulse")}))}),500)}},{key:"updateBrowserUrl",value:function(){this.setAjaxUrls(),window.history.pushState({},"",this.url)}},{key:"openFilterDrawer",value:function(){this.$filterDrawer.removeClass("-translate-x-full"),$(document).find(".sidebar-backdrop").removeClass("hidden")}},{key:"closeFilterDrawer",value:function(){this.$filterDrawer.addClass("-translate-x-full"),$(document).find(".sidebar-backdrop").addClass("hidden")}},{key:"initMaps",value:function(){var e=this,t=$("#map");if(t.length&&(!$(".view-type-map").length||$(".view-type-map").hasClass("active"))){var r=0,a=1,i=this.searchToObject(),o=t.data("center"),n=$("#properties-list .property-item[data-lat][data-long]").filter((function(){return $(this).data("lat")&&$(this).data("long")}));n&&n.length&&(o=[n.data("lat"),n.data("long")]),window.activeMap&&(window.activeMap.off(),window.activeMap.remove());var s=L.map("map",{zoomControl:!0,scrollWheelZoom:!0,dragging:!0,maxZoom:22}).setView(o,14);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(s);var l=new L.MarkerClusterGroup,c=[],d=$("#traffic-popup-map-template").html();!function o(){return(0==r||a<=r)&&(i.page=a,$.ajax({url:t.data("url"),type:"GET",data:i,success:function(t){t.data.length>0&&(t.data.forEach((function(t){if(t.latitude&&t.longitude){var r=L.divIcon({className:"boxmarker",iconSize:L.point(50,20),html:t.map_icon}),a=e.templateReplace(t,d),i=new L.Marker(new L.LatLng(t.latitude,t.longitude),{icon:r}).bindPopup(a).addTo(s);c.push(i),l.addLayer(i),s.flyToBounds(L.latLngBounds(c.map((function(e){return e.getLatLng()}))))}})),0==r&&(r=t.meta.last_page),a++,o())}})),!1}(),s.addLayer(l),window.activeMap=s}}},{key:"searchToObject",value:function(){var e,t,r=window.location.search.substring(1).split("&"),a={};for(t in r)""!==r[t]&&(e=r[t].split("="),a[decodeURIComponent(e[0])]=decodeURIComponent(e[1]));return a}},{key:"templateReplace",value:function(e,t){var r=Object.keys(e);for(var a in r)if(r.hasOwnProperty(a)){var i=r[a];t=t.replace(new RegExp("__"+i+"__","gi"),e[i]||"")}return t}},{key:"activeMap",value:function(){$("#properties-list").addClass("hidden"),$("#properties-map").removeClass("hidden")}},{key:"disableMap",value:function(){$("#properties-map").addClass("hidden"),$("#properties-list").removeClass("hidden")}}])&&a(r.prototype,o),n&&a(r,n),Object.defineProperty(r,"prototype",{writable:!1}),t}())})()})();
