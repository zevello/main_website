(()=>{"use strict";var e={3872:(e,t,a)=>{a.d(t,{Z:()=>c});window.showAlert=function(e,t){if(e&&""!==t){var a=Math.floor(1e3*Math.random()),r='<div class="alert '.concat(e,' alert-dismissible" id="').concat(a,'">\n                        <span class="close cursor-pointer mdi mdi-close-box" aria-label="close"></span>\n                        <i class="')+("alert-success"===e?"mdi mdi-check":"mdi mdi-exclamation")+' message-icon"></i>\n                        '.concat(t,"\n                    </div>");$("#alert-container").append(r).ready((function(){window.setTimeout((function(){$("#alert-container #".concat(a)).remove()}),6e3)}))}};var r=function(e,t,a){var r=new Date,i=window.siteUrl;i.includes(window.location.protocol)||(i=window.location.protocol+i);var n=new URL(i);r.setTime(r.getTime()+24*a*60*60*1e3);var o="expires="+r.toUTCString();document.cookie=e+"="+t+"; "+o+"; path=/; domain="+n.hostname},i=function(e){for(var t=e+"=",a=document.cookie.split(";"),r=0;r<a.length;r++){for(var i=a[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},n=function(e){var t=window.siteUrl;t.includes(window.location.protocol)||(t=window.location.protocol+t);var a=new URL(t);document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain="+a.hostname};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,n=void 0,n=function(e,t){if("object"!==o(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(n)?n:String(n)),r)}var i,n}var l=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refresh(),$(document).on("click",".add-to-wishlist",(function(e){e.preventDefault(),t.addOrRemove($(e.currentTarget))}))}var t,a,o;return t=e,a=[{key:"addOrRemove",value:function(e){var t="real_estate_wishlist",a=e.data("id"),o=e.data("type"),s=decodeURIComponent(i(t));if(s=s?JSON.parse(s):{projects:[],properties:[]},null!=a&&0!==a&&void 0!==a){var l=s.properties;"project"===o&&(l=s.projects);var c=l.map((function(e){return e})).indexOf(a);-1===c?("project"===o?s.projects.push(a):s.properties.push(a),n(t),r(t,JSON.stringify(s),60),e.find("i").removeClass("mdi mdi-heart-outline").addClass("mdi mdi-heart")):("project"===o?s.projects.splice(c,1):s.properties.splice(c,1),n(t),r(t,JSON.stringify(s),60),e.find("i").removeClass("mdi mdi-heart").addClass("mdi mdi-heart-outline"))}var d=JSON.parse(i(t)),u=d.properties.length+d.projects.length;$(".wishlist-count").text(u),this.refresh()}},{key:"refresh",value:function(){var e=decodeURIComponent(i("real_estate_wishlist"));if(null!=e&&e){var t=JSON.parse(e);t.properties.length&&$.each($(document).find('.add-to-wishlist[data-box-type="property"]'),(function(e,a){var r=$(a).data("id");-1!==t.properties.indexOf(r)&&$(a).find("i").removeClass("mdi mdi-heart-outline").addClass("mdi mdi-heart")})),t.projects.length&&$.each($(document).find('.add-to-wishlist[data-box-type="project"]'),(function(e,a){var r=$(a).data("id");-1!==t.projects.indexOf(r)&&$(a).find("i").removeClass("mdi mdi-heart-outline").addClass("mdi mdi-heart")}))}}}],a&&s(t.prototype,a),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();const c=l;new l}},t={};function a(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,a),n.exports}a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=a(3872);function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function i(e,t,a){return(t=n(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e){var a=function(e,a){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,a||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"===t(a)?a:String(a)}new(function(){function t(){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"$itemElement",$(".item-search")),i(this,"$filterDrawer",$("#filter-drawer")),i(this,"wishlist",new e.Z),i(this,"searchParams",new URLSearchParams(window.location.search)),i(this,"form",this.$itemElement.find("form")),i(this,"action",this.form.prop("action")),i(this,"ajaxUrl",this.form.data("ajax-url")),i(this,"url",""===this.searchParams.toString()?this.action:"".concat(this.action,"?").concat(this.searchParams.toString())),i(this,"ajaxUrlWithQueryString",""===this.searchParams.toString()?this.ajaxUrl:"".concat(this.ajaxUrl,"?").concat(this.searchParams.toString())),$(document).on("click",".sidebar-backdrop",(function(e){$(e.currentTarget).is("#filter-drawer > div")||a.closeFilterDrawer()})),this.form.on("submit",(function(e){e.preventDefault(),$(e.currentTarget).serializeArray().forEach((function(e){e.value?"keyword"!==e.name?a.searchParams.set(e.name,e.value):a.searchParams.set("k",e.value):a.searchParams.delete(e.name)})),a.closeFilterDrawer(),a.refresh()})),this.$filterDrawer.on("click","#close-filters",(function(){a.closeFilterDrawer()})),this.$itemElement.on("change","#sort-by",(function(){var e=a.$itemElement.find("#sort-by").val();a.searchParams.set("sort_by",e),a.refresh()})).on("change","#per-page",(function(){var e=a.$itemElement.find("#per-page").val();a.searchParams.set("per_page",e),a.refresh()})).on("click",".reset-filter",(function(e){e.preventDefault(),a.closeFilterDrawer(),a.searchParams=new URLSearchParams,a.$itemElement.not(':has(> input[name="type"])').find("input").val(""),a.$itemElement.find("select").prop("selectedIndex",0),a.refresh()})).on("click","#open-filter",(function(){a.openFilterDrawer()})).on("click",".toggle-layout",(function(e){a.searchParams.set("layout",$(e.currentTarget).data("type")),$(".toggle-layout").removeClass("bg-primary").addClass("bg-slate-500").prop("disabled",!1),$(e.currentTarget).addClass("bg-primary").removeClass("bg-slate-500").prop("disabled",!0),a.refresh()})),$(document).on("click","#pagination a",(function(e){e.preventDefault();var t=new URL(e.target.href);a.searchParams.set("page",t.searchParams.get("page")),a.refresh()}))}var a,n,o;return a=t,(n=[{key:"refresh",value:function(){var e=this,t=$(document).find("#items-list"),a=t.data("type"),r=this.searchParams.get("layout")||t.data("layout"),i=$("#".concat(a,"-").concat(r,"-skeleton")).html();"grid"===r?(t.children().removeClass("lg:grid-cols-2").addClass("md:grid-cols-2 lg:grid-cols-3"),this.disableMap()):"list"===r?(t.children().removeClass("md:grid-cols-2 lg:grid-cols-3").addClass("lg:grid-cols-2"),this.disableMap()):"map"===r&&(this.activeMap(),this.initMap()),i&&t.find(".".concat(a,"-item")).each((function(e,t){$(t).html(i)}));var n=this.$itemElement.find('input[name="category_id"]');n.length&&this.searchParams.set("category_id",n.val()),clearTimeout(null),$("html, body").animate({scrollTop:$("#items-list").offset().top-200},0),t.addClass("animate-pulse"),this.updateBrowserUrl(),setTimeout((function(){$.ajax({url:e.ajaxUrlWithQueryString,type:"POST",success:function(a){t.html(a.data),e.wishlist.refresh(),"map"===r&&(e.activeMap(),e.initMap())},complete:function(){t.removeClass("animate-pulse")}})}),500)}},{key:"updateBrowserUrl",value:function(){this.ajaxUrl||(this.ajaxUrl=this.action=this.$itemElement.data("ajax-url")),this.url=""===this.searchParams.toString()?this.action:"".concat(this.action,"?").concat(this.searchParams.toString()),this.ajaxUrlWithQueryString=""===this.searchParams.toString()?this.ajaxUrl:"".concat(this.ajaxUrl,"?").concat(this.searchParams.toString()),window.history.pushState({},"",this.url)}},{key:"openFilterDrawer",value:function(){this.$filterDrawer.removeClass("-translate-x-full"),$(document).find(".sidebar-backdrop").removeClass("hidden")}},{key:"closeFilterDrawer",value:function(){this.$filterDrawer.addClass("-translate-x-full"),$(document).find(".sidebar-backdrop").addClass("hidden")}},{key:"initMap",value:function(){var e=this,t=$("#map"),a=$(".view-type-map");if(t.length&&(!a.length||a.hasClass("active"))){var r=0,i=1,n=t.data("center"),o=this.searchToObject(),s=$("#items-map .projects-item[data-lat][data-long]").filter((function(){return $(this).data("lat")&&$(this).data("long")}));s&&s.length&&(n=[s.data("lat"),s.data("long")]),window.activeMap&&(window.activeMap.off(),window.activeMap.remove());var l=L.map("map",{zoomControl:!0,scrollWheelZoom:!0,dragging:!0,maxZoom:t.data("max-zoom")||22}).setView(n,14);L.tileLayer(t.data("tile-layer")?t.data("tile-layer"):"https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}").addTo(l);var c=new L.MarkerClusterGroup,d=[],u=$("#traffic-popup-map-template").html();!function a(){(0===r||i<=r)&&(o.page=i,$.ajax({url:t.data("url"),type:"GET",data:o,success:function(t){t.data.length<1||(t.data.forEach((function(t){if(t.latitude&&t.longitude){var a=L.divIcon({className:"boxmarker",iconSize:L.point(50,20),html:t.map_icon}),r=e.templateReplace(t,u),i=new L.Marker(new L.LatLng(t.latitude,t.longitude),{icon:a}).bindPopup(r).addTo(l);d.push(i),c.addLayer(i),l.flyToBounds(L.latLngBounds(d.map((function(e){return e.getLatLng()}))))}})),0===r&&(r=t.meta.last_page),i++,a())}}))}(),l.addLayer(c),window.activeMap=l}}},{key:"searchToObject",value:function(){var e,t,a=window.location.search.substring(1).split("&"),r={};for(t in a)""!==a[t]&&(e=a[t].split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e[1]));return r}},{key:"templateReplace",value:function(e,t){var a=Object.keys(e);for(var r in a)if(a.hasOwnProperty(r)){var i=a[r];t=t.replace(new RegExp("__"+i+"__","gi"),e[i]||"")}return t}},{key:"activeMap",value:function(){$("html, body").animate({scrollTop:$("#items-map").offset().top-230},0),$("#items-list").addClass("hidden"),$("#items-map").removeClass("hidden")}},{key:"disableMap",value:function(){$("#items-map").addClass("hidden"),$("#items-list").removeClass("hidden")}}])&&r(a.prototype,n),o&&r(a,o),Object.defineProperty(a,"prototype",{writable:!1}),t}())})()})();